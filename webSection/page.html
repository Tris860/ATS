<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/icon" href="../media/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/timetable.css">
    <title>ATS, Dashboard</title>
</head>

<body>
    <div class="container">
        <h1>
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
            </svg>
            ATS Dashboard
        </h1>

        <!-- User Email Display (Placeholder) -->
        <div class="user-email-display">
            <p>Logged in as: <span id="userEmailDisplay">Loading...</span></p>
        </div>

        <!-- Main Navigation Menu -->
        <div class="main-nav">
            <button id="navTimetableBtn" class="nav-button active">Timetable</button>
            <button id="navManualBtn" class="nav-button">Manual</button>
            <button id="navSettingsBtn" class="nav-button">Settings</button>
        </div>

        <!-- Timetable Section -->
        <div id="timetableSection" class="section active-section">
            <!-- Day Selection Buttons -->
            <div class="day-selection" id="daySelection">
                <!-- Buttons will be generated by JavaScript -->
            </div>

            <!-- Add New Period Form -->
            <div class="add-period-form">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>
                    </svg>
                    Add New Period
                </h2>
                <div class="form-grid">
                    <div class="form-field">
                        <label for="newName">Period Name</label>
                        <input type="text" id="newName" placeholder="e.g., Morning Session" />
                    </div>
                    <div class="form-field">
                        <label for="newStartTime">Start Time</label>
                        <input type="text" id="newStartTime" placeholder="HH:MM:SS" pattern="^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$" />
                    </div>
                    <div class="form-field">
                        <label for="newEndTime">End Time</label>
                        <input type="text" id="newEndTime" placeholder="HH:MM:SS" pattern="^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$" />
                    </div>
                    <button id="addPeriodBtn" class="add-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>
                        </svg>
                        Add Period
                    </button>
                </div>
            </div>

            <!-- Timetable Table -->
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th scope="col" data-label="Name">Period Name</th>
                            <th scope="col" data-label="Day">Day</th>
                            <th scope="col" data-label="Start Time">Start Time</th>
                            <th scope="col" data-label="End Time">End Time</th>
                            <th scope="col" data-label="Active" style="text-align: center;">Active</th>
                            <th scope="col" data-label="Actions" style="text-align: center;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="timetableBody">
                        <!-- Periods will be rendered here by JavaScript -->
                        <tr>
                            <td colspan="6" class="loading-message" id="loadingMessage">Loading timetable...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Manual Section -->
        <div id="manualSection" class="section hidden-section">
            <h2 class="section-title">Manual Bell Control</h2>
            <div class="manual-control-group">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/><path d="M12 2v2"/></svg>
                    Ring Bell Now
                </h3>
                <button id="ringBellBtn" class="ring-bell-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/><path d="M12 2v2"/></svg>
                    Ring Bell
                </button>
            </div>

            <div class="manual-control-group">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5A2.5 2.5 0 0 1 15 1h1a2.5 2.5 0 0 1 2.5 2.5v5c0 .83-.67 1.5-1.5 1.5"/><path d="M12 12H9c-2.2 0-4-1.8-4-4V4c0-1.1.9-2 2-2h3c1.1 0 2 .9 2 2v4"/><path d="M12 12v10"/><path d="M12 12H4"/><path d="M12 12h8"/><path d="M16 16h-4"/></svg>
                    System Hard Switch
                </h3>
                <div class="hard-switch-toggle-group">
                    <label for="toggleHardSwitch" style="margin-bottom: 0;">Hard Switch Enabled</label>
                    <label class="toggle-switch-label">
                        <input type="checkbox" id="toggleHardSwitch" class="toggle-switch-checkbox" checked />
                        <div class="toggle-switch-background">
                            <span class="toggle-switch-handle"></span>
                        </div>
                    </label>
                </div>
                <p class="section-content" style="font-size: 14px; margin-top: 15px; color: var(--color-gray-600);">
                    When the hard switch is OFF, the bell system (both manual and automated timetable rings) will be deactivated.
                </p>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settingsSection" class="section hidden-section">
            <h2 class="section-title">Settings</h2>

            <div class="settings-form-group">
                <h3>Change Password</h3>
                <div class="form-field">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" />
                </div>
                <div class="form-field">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" />
                </div>
                <div class="form-field">
                    <label for="confirmNewPassword">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" />
                </div>
                <button id="changePasswordBtn" class="action-button primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 6v12a3 3 0 1 0 3-3H2a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h16a3 3 0 1 0-3-3Z"/></svg>
                    Change Password
                </button>
            </div>

            <div class="settings-form-group">
                <h3>Change Email</h3>
                <div class="form-field">
                    <label for="emailCurrentPassword">Current Password</label>
                    <input type="password" id="emailCurrentPassword" />
                </div>
                <div class="form-field">
                    <label for="newEmail">New Email</label>
                    <input type="email" id="newEmail" />
                </div>
                <button id="changeEmailBtn" class="action-button primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    Change Email
                </button>
            </div>

            <div class="settings-form-group">
                <h3>Timetable Visibility</h3>
                <div class="form-field" style="flex-direction: row; align-items: center; justify-content: space-between;">
                    <label for="toggleTimetableVisibility" style="margin-bottom: 0;">Show Timetable Section</label>
                    <label class="toggle-switch-label">
                        <input type="checkbox" id="toggleTimetableVisibility" class="toggle-switch-checkbox" checked />
                        <div class="toggle-switch-background">
                            <span class="toggle-switch-handle"></span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="settings-form-group" style="text-align: center;">
                <h3>Account Actions</h3>
                <button id="logoutBtn" class="action-button danger">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="17 16 22 12 17 8"/><line x1="22" x2="10" y1="12" y2="12"/></svg>
                    Logout
                </button>
            </div>
        </div>
        <div class="copyright">Developed by <span>Tris</span> Tech Hub</div>
    </div>

    <!-- Custom Modal for Confirmations -->
    <div id="customModalOverlay" class="custom-modal-overlay">
        <div class="custom-modal-content">
            <h3 id="modalTitle">Confirm Action</h3>
            <p id="modalMessage">Are you sure you want to proceed?</p>
            <div class="modal-buttons">
                <button id="modalConfirmBtn" class="modal-button confirm">Confirm</button>
                <button id="modalCancelBtn" class="modal-button cancel">Cancel</button>
            </div>
        </div>
    </div>
</body>

<a href="../backend/systemEndpoint.php"></a>
<script src="../javascript/page.js"></script>
</html>
